"use strict";(self["webpackChunkgithub_tools"]=self["webpackChunkgithub_tools"]||[]).push([[796],{796:function(t,e,n){n.r(e),n.d(e,{default:function(){return G}});var l=n(768),s=n(232),i=n(130);const a={class:"sql-tools"},o={class:"header"},r={class:"tool-container"},u={class:"tab-container"},c={class:"tab-buttons"},p={key:0,class:"tab-content"},m={class:"form-group"},d={class:"options"},k={class:"output"},b={key:1,class:"tab-content"},g={class:"form-group"},L={class:"form-group"},h={class:"form-group"},T={class:"form-group"},I={class:"form-group"},v={class:"options"},f={class:"output"},y={key:2,class:"tab-content"},C={class:"form-group"},S={class:"options"},q={class:"output"};function x(t,e,n,x,E,N){return(0,l.uX)(),(0,l.CE)("div",a,[(0,l.Lk)("div",o,[(0,l.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>N.goToHome&&N.goToHome(...t)),class:"home-btn"},"← 返回首页"),e[30]||(e[30]=(0,l.Lk)("h1",null,"SQL 工具集",-1))]),(0,l.Lk)("div",r,[(0,l.Lk)("div",u,[(0,l.Lk)("div",c,[(0,l.Lk)("button",{class:(0,s.C4)(["tab-btn",{active:"sqlIn"===E.activeTab}]),onClick:e[1]||(e[1]=t=>E.activeTab="sqlIn")}," SQL IN 参数转换 ",2),(0,l.Lk)("button",{class:(0,s.C4)(["tab-btn",{active:"sqlGenerator"===E.activeTab}]),onClick:e[2]||(e[2]=t=>E.activeTab="sqlGenerator")}," SQL 查询生成器 ",2),(0,l.Lk)("button",{class:(0,s.C4)(["tab-btn",{active:"insertAggregator"===E.activeTab}]),onClick:e[3]||(e[3]=t=>E.activeTab="insertAggregator")}," INSERT 语句聚合器 ",2)]),"sqlIn"===E.activeTab?((0,l.uX)(),(0,l.CE)("div",p,[e[36]||(e[36]=(0,l.Lk)("h2",null,"SQL IN 参数转换",-1)),(0,l.Lk)("div",m,[e[31]||(e[31]=(0,l.Lk)("label",{for:"inputText"},"输入多行文本 (每行一个值):",-1)),(0,l.bo)((0,l.Lk)("textarea",{id:"inputText","onUpdate:modelValue":e[4]||(e[4]=t=>E.inParams.inputText=t),placeholder:"例如:\n值1\n值2\n值3"},null,512),[[i.Jo,E.inParams.inputText]])]),(0,l.Lk)("div",d,[(0,l.Lk)("label",null,[(0,l.bo)((0,l.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=t=>E.inParams.addQuotes=t)},null,512),[[i.lH,E.inParams.addQuotes]]),e[32]||(e[32]=(0,l.eW)(" 添加引号 ",-1))]),(0,l.Lk)("label",null,[(0,l.bo)((0,l.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=t=>E.inParams.singleQuotes=t)},null,512),[[i.lH,E.inParams.singleQuotes]]),e[33]||(e[33]=(0,l.eW)(" 单引号 (不选则使用双引号) ",-1))]),(0,l.Lk)("label",null,[(0,l.bo)((0,l.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=t=>E.inParams.trimValues=t)},null,512),[[i.lH,E.inParams.trimValues]]),e[34]||(e[34]=(0,l.eW)(" 去除空白 ",-1))]),(0,l.Lk)("label",null,[(0,l.bo)((0,l.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=t=>E.inParams.skipEmpty=t)},null,512),[[i.lH,E.inParams.skipEmpty]]),e[35]||(e[35]=(0,l.eW)(" 忽略空行 ",-1))])]),(0,l.Lk)("button",{onClick:e[9]||(e[9]=(...t)=>N.convertToSqlIn&&N.convertToSqlIn(...t)),class:"action-btn"},"转换为 SQL IN 格式"),(0,l.Lk)("button",{onClick:e[10]||(e[10]=(...t)=>N.removeLineBreaks&&N.removeLineBreaks(...t)),class:"action-btn"},"去除换行符"),(0,l.Lk)("button",{onClick:e[11]||(e[11]=(...t)=>N.clearInParamsInput&&N.clearInParamsInput(...t)),class:"clear-btn"},"清空输入"),(0,l.Lk)("div",k,(0,s.v_)(E.inParams.outputText),1),(0,l.Lk)("button",{onClick:e[12]||(e[12]=t=>N.copyToClipboard(E.inParams.outputText)),class:"copy-btn"},"复制结果")])):(0,l.Q3)("",!0),"sqlGenerator"===E.activeTab?((0,l.uX)(),(0,l.CE)("div",b,[e[45]||(e[45]=(0,l.Lk)("h2",null,"SQL 查询生成器",-1)),(0,l.Lk)("div",g,[e[37]||(e[37]=(0,l.Lk)("label",{for:"tableName"},"表名:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"tableName","onUpdate:modelValue":e[13]||(e[13]=t=>E.sqlGen.tableName=t),placeholder:"例如: users"},null,512),[[i.Jo,E.sqlGen.tableName]])]),(0,l.Lk)("div",L,[e[38]||(e[38]=(0,l.Lk)("label",{for:"columns"},"列名 (逗号分隔):",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"columns","onUpdate:modelValue":e[14]||(e[14]=t=>E.sqlGen.columns=t),placeholder:"例如: id, name, email"},null,512),[[i.Jo,E.sqlGen.columns]])]),(0,l.Lk)("div",h,[e[39]||(e[39]=(0,l.Lk)("label",{for:"whereConditions"},"WHERE 条件 (可选):",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"whereConditions","onUpdate:modelValue":e[15]||(e[15]=t=>E.sqlGen.whereConditions=t),placeholder:"例如: status = 'active'"},null,512),[[i.Jo,E.sqlGen.whereConditions]])]),(0,l.Lk)("div",T,[e[40]||(e[40]=(0,l.Lk)("label",{for:"orderBy"},"ORDER BY (可选):",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"orderBy","onUpdate:modelValue":e[16]||(e[16]=t=>E.sqlGen.orderBy=t),placeholder:"例如: created_at DESC"},null,512),[[i.Jo,E.sqlGen.orderBy]])]),(0,l.Lk)("div",I,[e[41]||(e[41]=(0,l.Lk)("label",{for:"limit"},"LIMIT (可选):",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"limit","onUpdate:modelValue":e[17]||(e[17]=t=>E.sqlGen.limit=t),placeholder:"例如: 100"},null,512),[[i.Jo,E.sqlGen.limit]])]),(0,l.Lk)("div",v,[(0,l.Lk)("label",null,[(0,l.bo)((0,l.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[18]||(e[18]=t=>E.sqlGen.selectQuery=t)},null,512),[[i.lH,E.sqlGen.selectQuery]]),e[42]||(e[42]=(0,l.eW)(" SELECT ",-1))]),(0,l.Lk)("label",null,[(0,l.bo)((0,l.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[19]||(e[19]=t=>E.sqlGen.countQuery=t)},null,512),[[i.lH,E.sqlGen.countQuery]]),e[43]||(e[43]=(0,l.eW)(" COUNT ",-1))]),(0,l.Lk)("label",null,[(0,l.bo)((0,l.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[20]||(e[20]=t=>E.sqlGen.distinctQuery=t)},null,512),[[i.lH,E.sqlGen.distinctQuery]]),e[44]||(e[44]=(0,l.eW)(" DISTINCT ",-1))])]),(0,l.Lk)("button",{onClick:e[21]||(e[21]=(...t)=>N.generateSqlQuery&&N.generateSqlQuery(...t)),class:"action-btn"},"生成 SQL 查询"),(0,l.Lk)("button",{onClick:e[22]||(e[22]=(...t)=>N.clearSqlGenFields&&N.clearSqlGenFields(...t)),class:"clear-btn"},"清空字段"),(0,l.Lk)("div",f,(0,s.v_)(E.sqlGen.queryOutput),1),(0,l.Lk)("button",{onClick:e[23]||(e[23]=t=>N.copyToClipboard(E.sqlGen.queryOutput)),class:"copy-btn"},"复制 SQL")])):(0,l.Q3)("",!0),"insertAggregator"===E.activeTab?((0,l.uX)(),(0,l.CE)("div",y,[e[49]||(e[49]=(0,l.Lk)("h2",null,"INSERT 语句聚合器",-1)),(0,l.Lk)("div",C,[e[46]||(e[46]=(0,l.Lk)("label",{for:"insertInput"},"输入多条 INSERT 语句 (每条语句一行或多行):",-1)),(0,l.bo)((0,l.Lk)("textarea",{id:"insertInput","onUpdate:modelValue":e[24]||(e[24]=t=>E.insertAgg.inputText=t),placeholder:"例如:\nINSERT INTO scada_i18n_message (id, message_key, lang_code, message_value, module, create_time, update_time, remark) VALUES(1989241743978532865, 'protocol.point.liquidResidualRateUsed', 'en', 'Liquid Residual Moisture Check', 'protocol', '2025-11-14 15:59:24', '2025-11-14 15:59:24', NULL);\nINSERT INTO scada_i18n_message (id, message_key, lang_code, message_value, module, create_time, update_time, remark) VALUES(1989240908590616578, 'protocol.point.liquidResidualRateUsed', 'zh-cn', '液体残余率使用选配', 'protocol', '2025-11-14 15:56:05', '2025-11-14 15:56:05', NULL);"},null,512),[[i.Jo,E.insertAgg.inputText]])]),(0,l.Lk)("div",S,[(0,l.Lk)("label",null,[(0,l.bo)((0,l.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[25]||(e[25]=t=>E.insertAgg.addOnDuplicate=t)},null,512),[[i.lH,E.insertAgg.addOnDuplicate]]),e[47]||(e[47]=(0,l.eW)(" 添加 ON DUPLICATE KEY UPDATE ",-1))]),(0,l.Lk)("label",null,[(0,l.bo)((0,l.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[26]||(e[26]=t=>E.insertAgg.removeIdColumn=t)},null,512),[[i.lH,E.insertAgg.removeIdColumn]]),e[48]||(e[48]=(0,l.eW)(" 去除 id 列 ",-1))])]),(0,l.Lk)("button",{onClick:e[27]||(e[27]=(...t)=>N.aggregateInsertStatements&&N.aggregateInsertStatements(...t)),class:"action-btn"},"聚合 INSERT 语句"),(0,l.Lk)("button",{onClick:e[28]||(e[28]=(...t)=>N.clearInsertAggInput&&N.clearInsertAggInput(...t)),class:"clear-btn"},"清空输入"),(0,l.Lk)("div",q,(0,s.v_)(E.insertAgg.outputText),1),(0,l.Lk)("button",{onClick:e[29]||(e[29]=t=>N.copyToClipboard(E.insertAgg.outputText)),class:"copy-btn"},"复制结果")])):(0,l.Q3)("",!0)])])])}var E={name:"SqlTools",data(){return{activeTab:"sqlIn",inParams:{inputText:"",outputText:"",addQuotes:!0,singleQuotes:!0,trimValues:!0,skipEmpty:!0},sqlGen:{tableName:"",columns:"",whereConditions:"",orderBy:"",limit:"",selectQuery:!0,countQuery:!1,distinctQuery:!1,queryOutput:""},insertAgg:{inputText:"",outputText:"",addOnDuplicate:!1,removeIdColumn:!1}}},methods:{goToHome(){this.$router.push("/")},convertToSqlIn(){const t=this.inParams.inputText;if(!t.trim())return void(this.inParams.outputText="请输入数据");let e=t.split("\n");if(this.inParams.trimValues&&(e=e.map(t=>t.trim())),this.inParams.skipEmpty&&(e=e.filter(t=>t.length>0)),this.inParams.addQuotes){const t=this.inParams.singleQuotes?"'":'"';e=e.map(e=>`${t}${e}${t}`)}this.inParams.outputText=`(${e.join(", ")})`},removeLineBreaks(){this.inParams.outputText&&"请输入数据"!==this.inParams.outputText&&(this.inParams.outputText=this.inParams.outputText.replace(/\n/g," "))},clearInParamsInput(){this.inParams.inputText="",this.inParams.outputText=""},generateSqlQuery(){const{tableName:t,columns:e,whereConditions:n,orderBy:l,limit:s,countQuery:i,distinctQuery:a}=this.sqlGen;if(!t.trim())return void(this.sqlGen.queryOutput="请输入表名");let o="";if(i)o=a&&e.trim()?`SELECT COUNT(DISTINCT ${e}) FROM ${t}`:`SELECT COUNT(*) FROM ${t}`;else{let n=e.trim()||"*";o=a&&e.trim()?`SELECT DISTINCT ${n} FROM ${t}`:`SELECT ${n} FROM ${t}`}n.trim()&&(o+=`\nWHERE ${n}`),l.trim()&&!i&&(o+=`\nORDER BY ${l}`),s.trim()&&(o+=`\nLIMIT ${s}`),o+=";",this.sqlGen.queryOutput=o},clearSqlGenFields(){this.sqlGen.tableName="",this.sqlGen.columns="",this.sqlGen.whereConditions="",this.sqlGen.orderBy="",this.sqlGen.limit="",this.sqlGen.queryOutput=""},aggregateInsertStatements(){const t=this.insertAgg.inputText.trim();if(t)try{const e=this.parseInsertStatements(t);if(0===e.length)return void(this.insertAgg.outputText="未找到有效的 INSERT 语句");const n=e[0].tableName,l=e[0].columns;for(let t=1;t<e.length;t++){if(e[t].tableName!==n)return void(this.insertAgg.outputText="错误：INSERT 语句必须针对同一张表");if(JSON.stringify(e[t].columns)!==JSON.stringify(l))return void(this.insertAgg.outputText="错误：所有 INSERT 语句的列名必须相同")}let s=[...l],i=e.map(t=>t.values);if(this.insertAgg.removeIdColumn){const t=s.findIndex(t=>"id"===t.toLowerCase());-1!==t&&(s.splice(t,1),i=i.map(e=>{const n=[...e];return n.splice(t,1),n}))}let a=`INSERT INTO ${n} (${s.join(", ")}) VALUES\n`;if(a+=i.map(t=>`(${t.join(", ")})`).join(",\n"),this.insertAgg.addOnDuplicate){const t=s.map(t=>`\`${t}\`=VALUES(\`${t}\`)`);a+=`\nON DUPLICATE KEY UPDATE ${t.join(", ")}`}a+=";",this.insertAgg.outputText=a}catch(e){this.insertAgg.outputText=`解析错误: ${e.message}`}else this.insertAgg.outputText="请输入 INSERT 语句"},parseInsertStatements(t){const e=[],n=t.replace(/\r\n/g,"\n").replace(/\s+/g," ").trim(),l=this.splitStatements(n);for(const s of l){if(!s.trim())continue;const t=s.match(/INSERT\s+INTO\s+(`?\w+`?)\s*\(([^)]+)\)\s*VALUES\s*\(/i);if(!t)continue;const n=t[1].trim().replace(/^`(.*)`$/,"$1"),l=t[2].trim(),i=l.split(",").map(t=>t.trim().replace(/^`(.*)`$/,"$1")),a=s.indexOf("VALUES")+6,o=s.substring(a).trim(),r=this.extractValuesContent(o);if(!r)continue;const u=this.parseValues(r);e.push({tableName:n,columns:i,values:u})}return e},splitStatements(t){const e=[];let n="",l=!1,s="";for(let i=0;i<t.length;i++){const a=t[i],o=i>0?t[i-1]:"",r=i<t.length-1?t[i+1]:"";if(('"'===a||"'"===a||"`"===a)&&"\\"!==o){if("'"===a&&l&&"'"===s&&"'"===r){n+=a,n+=r,i++;continue}if("`"===a&&l&&"`"===s&&"`"===r){n+=a,n+=r,i++;continue}l?a===s&&(l=!1,s=""):(l=!0,s=a)}";"!==a||l?n+=a:(n.trim()&&e.push(n.trim()),n="")}return n.trim()&&e.push(n.trim()),e},extractValuesContent(t){if(!t.startsWith("("))return null;let e=0,n=!1,l="",s="";for(let i=0;i<t.length;i++){const a=t[i],o=i>0?t[i-1]:"",r=i<t.length-1?t[i+1]:"";if(('"'===a||"'"===a||"`"===a)&&"\\"!==o){if("'"===a&&n&&"'"===l&&"'"===r){s+=a,s+=r,i++;continue}if("`"===a&&n&&"`"===l&&"`"===r){s+=a,s+=r,i++;continue}n?a===l&&(n=!1,l=""):(n=!0,l=a)}if(!n)if("("===a){if(e++,1===e)continue}else if(")"===a&&(e--,0===e))return s;e>0&&(s+=a)}return null},parseValues(t){const e=[];let n="",l=!1,s="",i=0;for(let a=0;a<t.length;a++){const o=t[a],r=a>0?t[a-1]:"",u=a<t.length-1?t[a+1]:"";if(('"'===o||"'"===o||"`"===o)&&"\\"!==r){if("'"===o&&l&&"'"===s&&"'"===u){n+=o,n+=u,a++;continue}if("`"===o&&l&&"`"===s&&"`"===u){n+=o,n+=u,a++;continue}l?o===s&&(l=!1,s=""):(l=!0,s=o)}l||("("===o?i++:")"===o&&i--),","!==o||l||0!==i?n+=o:(e.push(n.trim()),n="")}return n.trim()&&e.push(n.trim()),e},clearInsertAggInput(){this.insertAgg.inputText="",this.insertAgg.outputText=""},copyToClipboard(t){!t||"请输入数据"===t||"请输入表名"===t||"请输入 INSERT 语句"===t||"未找到有效的 INSERT 语句"===t||t.startsWith("错误：")||t.startsWith("解析错误:")||navigator.clipboard.writeText(t).catch(t=>{console.error("复制失败: ",t)})}}},N=n(241);const A=(0,N.A)(E,[["render",x],["__scopeId","data-v-3f69fcc5"]]);var G=A}}]);
//# sourceMappingURL=796.494dc28b.js.map